<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POO</title>
    <style>
        *{
            box-sizing: border-box;
        }
        h2{
            margin: 0;
        }
        form{
            padding: 1rem;
        }
        fieldset{
            display: flex;
            flex-wrap: wrap;
            gap: .5rem;
        }
        input,
        textarea,
        select,
        button{
            flex: 1 0 min(100%, 200px);
            padding: .25rem .5rem;
        }
    </style>
</head>
<body>
    <form id="formClientes">
        <h2>Clientes</h2>
        <fieldset>
            <legend>Informacion Personal</legend>
            <input type="hidden" name="id" value="1">
            <input type="text" name="nombre" placeholder="Nombre">
            <input type="text" name="apellido" placeholder="Apellido">
            <input type="number" name="edad" placeholder="Edad">
            <input type="date" name="fecha" title="fecha de nacimiento">
            <select name="genero">
                <optgroup label="genero">
                    <option value="M">masculino</option>
                    <option value="F">femenino</option>
                    <option value="NB">no binario</option>
                    <option value="PND">prefiero no decirlo</option>
                    <option value="o">otro</option>
                </optgroup>
            </select>
            <input type="tel" name="cuil" placeholder="cuil">
        </fieldset>
        <fieldset>
            <legend>Datos de Contacto</legend>
            <select name="tipo" label="tipo de cliente">
                <option value="e">empresa</option>
                <option value="p">pyme</option>
                <option value="i">individuo</option>
            </select>
            <input type="tel" name="telefono" placeholder="telefono">
            <input type="email" name="email" placeholder="Correo">
            <textarea name="direccion" placeholder="direccion"></textarea>
            <button>Agregar</button>
        </fieldset>
    </form>
    <form id="formEmpleados">
        <h2>Empleados</h2>
        <fieldset>
            <legend>Informacion Personal</legend>
            <input type="hidden" name="id" value="1">
            <input type="text" name="nombre" placeholder="Nombre">
            <input type="text" name="apellido" placeholder="Apellido">
            <input type="number" name="edad" placeholder="Edad">
            <input type="date" name="fecha" title="fecha de nacimiento">
            <select name="genero">
                <optgroup label="genero">
                    <option value="M">masculino</option>
                    <option value="F">femenino</option>
                    <option value="NB">no binario</option>
                    <option value="PND">prefiero no decirlo</option>
                    <option value="o">otro</option>
                </optgroup>
            </select>
            <input type="tel" name="cuil" placeholder="cuil">
        </fieldset>
        <fieldset>
            <legend>Datos del Empleado</legend>            
            <select name="categoria">
                <optgroup label="seleccione una categoria">
                    <option value="0">administracion</option>
                    <option value="1">atencion al cliente</option>
                    <option value="2">operar</option>
                    <option value="3">soporte tecnico</option>
                    <option value="4">asesor de cuenta</option>
                </optgroup>
            </select>
            <select name="sucursal" id="">
                <optgroup label="seleccione una sucursal">
                    <option value="0">zona norte</option>
                    <option value="1">zona oeste</option>
                    <option value="2">zona sur</option>
                    <option value="3">caba</option>
                </optgroup>
            </select>
            <select name="sector" id="">
                <optgroup label="seleccione su sector">
                    <option value="0">comercial</option>
                    <option value="1">caja</option>
                    <option value="2">contabilidad</option>
                    <option value="3">atencion al publico</option>
                </optgroup>
            </select>
            <input type="number" name="beneficios">
            <input type="date" title="fecha de alta">
            <input type="number" name="antigÃ¼edad">
            <button>agregar</button> 
        </fieldset>
    </form>
    <form id="formCuentas">
        <h2>Cuentas</h2>
        <fieldset>
            <legend>Datos de la Cuenta</legend>
            <input type="hidden" name="id" value="1">
            <input type="tel" name="numero" placeholder="numero de cuenta">
            <input type="text" name="cliente" placeholder="numero de cliente">
            <button>Crear Cuenta</button>
        </fieldset>
        <fieldset>
            <legend>Operaciones en Caja</legend>
            <input id="ammount" type="number">
            <button type="button" id="getSaldo" title="consultar">Consultar</button>
            <button type="button" id="agregarDinero" title="depositar">Depositar</button>
            <button type="button" id="extraerDinero" title="extraer">Extraer</button>
        </fieldset>
    </form>
    <!-- Clases para Clientes y Empleados -->
    <script>
        class Persona{
            // Propiedades de la clase
                #id = 0;
                #nombre = ''; // string private
                #apellido = ''; // string private
                #edad = 0; // integer private
                #fechaNacimiento = Date();
                #genero = '';
                #cuil = '';
            // Metodo que asigna los valores al Objeto
                constructor(id, nombre, apellido, edad, fechaNacimiento, genero, cuil){
                    this.#id = id;
                    this.#nombre = nombre;
                    this.#apellido = apellido;
                    this.#edad = edad;
                    this.#fechaNacimiento = fechaNacimiento;
                    this.#genero = genero;
                    this.#cuil = cuil;
                }
            // Metodos de la Clase
                getFullName(){
                    return `Bienvenido ${this.#nombre} ${this.#apellido}`
                }
                setFullName(name, surname){
                    name = parseInt(name) || name
                    if (name.length >= 2 && name.length <= 50){
                        this.#nombre = name;
                        this.#apellido = surname
                    } else {
                        console.log('no se puede utilizar ese nombre');
                    }
                }
                getAge(){
                    return this.#edad    
                }
                setAge(age){
                if (age < 18){
                    console.log('no tienes edad suficiente para acceder')
                } else {
                    this.#edad = age;
                }
            }
        }
        class Empleado extends Persona{
            #categoria;
            #sucursal;
            #sector;
            #sueldo = 30000.0000;
            #beneficios;
            #alta;
            #antiguedad;
            porcentaje = 0.5;
            constructor(categoria, sucursal, sector, beneficios, alta, antiguedad){
                super(...arguments);
                this.#categoria = categoria;
                this.#sucursal = sucursal;
                this.#sector = sector;
                this.#beneficios = beneficios;
                this.#alta = alta;
                this.#antiguedad = antiguedad;
            }
            // Metodos get
            getSueldo(){
                return this.#sueldo;
            }
            getSueldoAnualComplementario(){
                return this.#sueldo + this.#sueldo * this.porcentaje;
            }
            getBeneficioAntiguedad(){
                return this.#sueldo + this.#sueldo * this.#antiguedad / 100
            }
            // Metodos set
            setSueldo(monto){
                this.#sueldo = monto;
            }
            setAjustePorInflacion(inflacion){
                this.#sueldo += this.#sueldo * inflacion;
            }
            setAjusteImpositivo(descuento){
                this.#sueldo -= this.#sueldo * descuento;
            }
            setAntiguedad(hoy){
                this.#antiguedad = this.#alta - hoy
            }
        }
        class Cliente extends Persona{
            // Atributos Privados
            #tipo;
            #telefono;
            #correo;
            #direccion;
            // Metodo constructor
            constructor(tipo, telefono, correo, direccion){
                super(...arguments);
                this.#tipo = tipo;
                this.#telefono = telefono;
                this.#correo = correo;
                this.#direccion = direccion;
            }
            getTelefono(){
                return this.#telefono
            }
        }
        
        class Cuenta{
            #id;
            #cliente = 0;
            #numero;
            #saldo = 0.0000;
            #descubierto = 5000;
            #moneda = "pesos"
            #interes;
            constructor(id, numero, cliente){
                this.#id = id;
                this.#numero = numero;
                this.#cliente = cliente;
            }
            
        // Metodos de la cuenta
            depositarDinero(dinero){
                this.#saldo += parseFloat(dinero);
            }
            extraerDinero(dinero){
                dinero <= this.#saldo ?
                this.#saldo -= dinero :
                window.alert(`no puede retirar mas de $${this.#saldo}`)
            }
            getSaldo(){
                return this.#saldo;
            }
            getDescubierto(){
                return this.#descubierto;
            }
            getInteres(){
                return this.#interes;
            }
            setDescubierto(descubierto){
                this.#descubierto = descubierto;
            }
            setInteres(interes){
                this.#interes = interes;
            }
        }
        class CuentaPlazoFijo extends Cuenta{
            #plazo = 30;
            #precancelable = false;
            #renovacion = true;

            setPlazo(plazo){
                plazo >= 30 ?
                this.#plazo = plazo :
                window.alert('elija un periodo mayor a 30 dias');
            }
            setPrecancelacion(pc){
                typeof pc == 'boolean' ?
                this.#precancelable = pc :
                window.alert('el tipo de dato seleccionado no es valido');
            }
            setRenovacion(renew){
                typeof renew == 'boolean' ?
                this.#renovacion = renew :
                window.alert('el tipo de dato seleccionado no es valido');
            }
        }
    </script>
    <!-- Logica de formularios -->
    <script>
        const d = document;
        forms = d.querySelectorAll('form');
        // Clientes
        let arrayClientes = []
        const formClientes = d.querySelector('#formClientes');
        // Empleados
        let arrayEmpleados = []
        const formEmpleados = d.querySelector('#formEmpleados');
        // Cuentas
        let arrayCuentas = [];
        const formCuentas = d.querySelector('#formCuentas');
        // Array Auxiliar
        let values = [];

        forms.forEach( form => form.addEventListener( 'submit', (e) => { 
            e.preventDefault();
            form.querySelectorAll('input,select,textarea').forEach( 
                field => values.push(field.value)
        )   }   )   )

        formClientes.addEventListener('submit', () => {
            addObjectToArray(arrayClientes, Cliente)
        }   )

        formEmpleados.addEventListener('submit', () => {
            addObjectToArray(arrayEmpleados, Empleado)
        }   )

        formCuentas.addEventListener('submit', () => {
            addObjectToArray(arrayCuentas, Cuenta)
        }   )
        
        function addObjectToArray(array, className){
            newObject = new className(...values);
            q = window.confirm('Â¿esta seguro que desea cargar sus datos?');
            q ? array.push(newObject) : null;
            values = [];
        }
    </script>
    <!-- Operaciones en caja -->
    <script>
    const ammount = d.querySelector('#ammount');
    const getSaldo = d.querySelector('#getSaldo');
    const agregarDinero = d.querySelector('#agregarDinero');
    const extraerDinero = d.querySelector('#extraerDinero');

    getSaldo.onclick = () => {
        ammount.value = arrayCuentas[0].getSaldo()
    }
    agregarDinero.onclick = () => {
        arrayCuentas[0].depositarDinero(ammount.value);
        ammount.value = arrayCuentas[0].getSaldo()
    }
    extraerDinero.onclick = () => {
        arrayCuentas[0].extraerDinero(ammount.value);
        ammount.value = arrayCuentas[0].getSaldo()
    }
    </script>
</body>
</html>